<template>
  <div class="ic-page">
    <!-- â‘  Heroï¼šæ€»ä½“ä»‹ç»åŒº -->
    <section class="ic-hero" v-reveal>
      <div class="hero-bg" aria-hidden="true"></div>
      <div class="container hero-inner">
        <div class="hero-left">
          <h1 class="hero-title">äº§ä¸šåˆä½œ <span class="en">Industrial Collaboration</span></h1>
          <p class="hero-sub">
            ä»¥â€œæ”¿åºœ Ã— äº§ä¸š Ã— é«˜æ ¡/ç§‘ç ” Ã— èµ„æœ¬â€çš„ååŒæœºåˆ¶ä¸ºæ¡†æ¶ï¼Œèšç„¦å¯éªŒè¯çš„é‡Œç¨‹ç¢‘ä¸è½åœ°æŒ‡æ ‡ï¼Œ
            é€šè¿‡åˆ¶åº¦ã€åœºæ™¯ä¸èµ„é‡‘çš„ååŒæ¨åŠ¨æˆæœä»å®éªŒå®¤èµ°å‘é‡äº§ä¸åº”ç”¨ã€‚
          </p>
          <div class="rotator" :key="activePhrase">
            <span class="rotator-text">{{ activePhrase }}</span>
          </div>
        </div>
        <aside class="hero-right">
          <div class="cta-card" v-tilt>
            <div class="cta-head">
              <div class="cta-emoji" aria-hidden="true">ğŸ¤</div>
              <div>
                <h3>è”ç³»æˆ‘ä»¬ Â· åŠ å…¥è‚²åˆ›æ¹¾</h3>
                <p>å¯¹æ¥åˆä½œ/å…¥é©»ï¼Œè·å–é«˜æ ¡ä¸äº§ä¸šèµ„æºæ’®åˆæœåŠ¡ã€‚</p>
              </div>
            </div>
            <div class="cta-actions">
              <RouterLink class="btn primary" :to="{ name: 'contact' }" aria-label="è”ç³»è‚²åˆ›æ¹¾">è”ç³»æˆ‘ä»¬</RouterLink>
              <RouterLink class="btn ghost" :to="{ name: 'contact', query: { type: 'join' } }" aria-label="åŠ å…¥è‚²åˆ›æ¹¾">åŠ å…¥è‚²åˆ›æ¹¾</RouterLink>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- â‘¡ åˆä½œä½“ç³»åŒº -->
    <section class="ic-collab container" v-reveal>
      <!-- æ¨¡å— 1ï¼šæ”¿åºœåˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ›</div>
          <div>
            <h2>ä¸­å›½åœ°æ–¹æ”¿åºœåˆä½œ</h2>
            <p>ä¸åœ°æ–¹æ”¿åºœåŠå›­åŒºå…±å»ºæ‰¿æ¥å¹³å°ï¼Œä»¥â€œäº§ä¸šé“¾æ‹›å•† + å¹³å°åŒ–è¿è¥ + æ•°æ®é©±åŠ¨æ²»ç†â€å½¢æˆé•¿æœŸæœºåˆ¶ï¼Œæå‡åŒºåŸŸå†…æˆæœè½¬åŒ–æ•ˆç‡ä¸è´¨é‡ã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>æ‰¿æ¥å¹³å°ä¸è½¬åŒ–è½½ä½“</h3>
            <p>å›´ç»•é‡ç‚¹èµ›é“å»ºè®¾è½¬åŒ–ä¸­å¿ƒ/ç¤ºèŒƒå®éªŒå®¤ï¼Œå½¢æˆå¯å¤ç”¨çš„å·¥ç¨‹åŒ–èƒ½åŠ›ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>äº§ä¸šé“¾æ‹›å•†ä¸é›†ç¾¤åŒ–</h3>
            <p>ä»¥éœ€æ±‚ç«¯ä¸ºç‰µå¼•å¼€å±•é“¾ä¸Šæ‹›å•†ï¼Œå®ç°é¡¹ç›®ç°‡ç¾¤è½åœ°ä¸äº§ä¸šååŒã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æ”¿ç­–è¯„ä¼°ä¸æ²»ç†é—­ç¯</h3>
            <p>å»ºç«‹ç»©æ•ˆä¸è¿‡ç¨‹æ•°æ®å›æµï¼Œæ”¯æŒæ”¿ç­–ä¼˜åŒ–ä¸è¿­ä»£æ²»ç†ã€‚</p>
          </article>
        </div>
        <!-- æ”¿åºœåˆä½œ logo å¢™ -->
        <div class="logo-wall gov">
          <div class="logo-card" v-for="l in govLogos" :key="'gov-'+l.name">
            <img :src="`/gov-logos/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>

      <!-- æ¨¡å— 2ï¼šæŠ•èµ„åˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ’°</div>
          <div>
            <h2>ä¸­å›½æŠ•èµ„ä¸èµ„æœ¬åˆä½œ</h2>
            <p>è”åˆæ”¿åºœä¸“é¡¹ä¸ç¤¾ä¼šèµ„æœ¬ï¼Œèšç„¦å…·å¤‡å·¥ç¨‹åŒ–æ½œåŠ›çš„ç¡¬ç§‘æŠ€é¡¹ç›®ï¼Œ
              ä»¥â€œæœåŠ¡ + æŠ•èµ„â€çš„åŒè½®æ¨¡å¼åŠ é€Ÿè§„æ¨¡åŒ–è½åœ°ã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>è”åˆæŠ•èµ„ä¸ååŒ</h3>
            <p>æ‰“é€šæ”¿åºœåŸºé‡‘ã€äº§ä¸šåŸºé‡‘ä¸ä¼ä¸šèµ„æœ¬ï¼Œæ„å»ºååŒæŠ•èµ„é€šé“ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æˆæœè½¬åŒ–ä¸“é¡¹</h3>
            <p>å›´ç»• PoC/ä¸­è¯•å…³é”®ç¯èŠ‚é…ç½®èµ„é‡‘ï¼Œé™ä½æŠ€æœ¯ä¸å¸‚åœºä¸ç¡®å®šæ€§ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æŠ•åèµ‹èƒ½</h3>
            <p>æä¾›äº§ä¸šå¯¹æ¥ä¸æŠ€æœ¯é¡¾é—®æœåŠ¡ï¼Œç»“åˆæ”¿ç­–èµ„æºå½¢æˆé—­ç¯å­µåŒ–ã€‚</p>
          </article>
        </div>
        <!-- æŠ•èµ„åˆä½œ logo å¢™ -->
        <div class="logo-wall invest">
          <div class="logo-card" v-for="l in investLogos" :key="'invest-'+l.name">
            <!-- é¦–é€‰ invest-logsï¼Œå¤±è´¥æ—¶ onImgError è‡ªåŠ¨å°è¯• jpgï¼Œå†å°è¯• invest-logosï¼Œç„¶åå ä½ -->
            <img :src="`/invest-logs/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>

      <!-- æ¨¡å— 3ï¼ˆåˆå¹¶ï¼‰ï¼šé«˜æ ¡ä¸ç§‘ç ”æœºæ„åˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ“</div>
          <div>
            <h2>é«˜æ ¡ä¸ç§‘ç ”æœºæ„åˆä½œ</h2>
            <p>æœåŠ¡å¤šæ‰€â€œåŒä¸€æµâ€é«˜æ ¡å¹¶æ‹“å±•å›½é™…ç§‘ç ”ç½‘ç»œï¼Œå›´ç»•ä¸“åˆ©ç¡®æƒã€æµç¨‹ä¼˜åŒ–ã€å·¥ç¨‹éªŒè¯ä¸æ ‡å‡†å…±ç ”ç­‰ç¯èŠ‚ï¼Œ
              æä¾›ä»æ ¡å†…æœºåˆ¶åˆ°äº§ä¸šè½åœ°çš„ç«¯åˆ°ç«¯æ”¯æŒã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>æˆæœè½¬åŒ–ä¸­å¿ƒ</h3>
            <p>æä¾›æ ¡å†…æµç¨‹ä»£åŠã€IP ç»„åˆè§„åˆ’ä¸å•†ä¸šæ–¹æ¡ˆè®¾è®¡ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æ ¡ä¼è”åˆç ”å‘</h3>
            <p>ä»¥äº§ä¸šé—®é¢˜ä¸ºç‰µå¼•ï¼Œå…±å»ºå®éªŒå®¤ä¸åº”ç”¨ç ”ç©¶ï¼Œæ˜ç¡®é‡Œç¨‹ç¢‘ä¸éªŒæ”¶æ ‡å‡†ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>è½åœ°ä¸å­µåŒ–</h3>
            <p>å¯¹æ¥å›­åŒºä¸ä¸­è¯•å¹³å°ï¼Œæ¨è¿›ä»æ ·æœºåˆ°å°è¯•/ä¸­è¯•å†åˆ°é‡äº§çš„è·¯å¾„ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>ä¸­è‹±è”åˆå®éªŒå®¤</h3>
            <p>å…±å»ºè”åˆå®éªŒæ¡ä»¶ï¼Œè¿›è¡Œè·¨å›½æŠ€æœ¯éªŒè¯ä¸å¯¹æ ‡æµ‹è¯•ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>å›½é™…è½¬åŒ–é€šé“</h3>
            <p>æ”¯æŒæµ·å¤–æŠ€æœ¯åœ¨ä¸­å›½è¿›è¡Œä¸­è¯•ä¸æœ¬åœ°åŒ–é‡äº§ï¼Œå½¢æˆåŒå‘å¾ªç¯ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>å­¦æœ¯é¡¾é—®ä¸æ ‡å‡†å…±å»º</h3>
            <p>è”åˆå›½é™…å­¦æœ¯æœºæ„ä¸æ ‡å‡†ç»„ç»‡ï¼Œå‚ä¸æ ‡å‡†åˆ¶å®šä¸ç¬¬ä¸‰æ–¹è¯„ä¼°ã€‚</p>
          </article>
        </div>
        <!-- é«˜æ ¡ä¸ç§‘ç ”æœºæ„ logo å¢™ -->
        <div class="logo-wall uni">
          <div class="logo-card" v-for="l in uniLogos" :key="'uni-'+l.name">
            <img :src="`/logos/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from 'vue'

const phrases = ['æŠ€æœ¯è½¬ç§»','å›½é™…åˆä½œ','äº§ä¸šå…±åˆ›','æ”¿ç­–èµ‹èƒ½']
const idx = ref(0)
const activePhrase = ref(phrases[0])
let timer: number | undefined

onMounted(()=>{
  timer = window.setInterval(()=>{
    idx.value = (idx.value + 1) % phrases.length
    activePhrase.value = phrases[idx.value]
  }, 2600)
})
onBeforeUnmount(()=>{ if(timer) window.clearInterval(timer) })

// Logo å¢™æ•°æ®ï¼ˆæ•°å­—åºå·ï¼‰
const govLogos = Array.from({ length: 10 }, (_, i) => ({ name: String(i+1), alt: `æ”¿åºœåˆä½œ Logo ${i+1}` }))
const investLogos = Array.from({ length: 16 }, (_, i) => ({ name: String(i+1), alt: `æŠ•èµ„åˆä½œ Logo ${i+1}` }))
const uniLogos = [
  ...Array.from({ length: 11 }, (_, i) => ({ name: String(i + 1), alt: `é«˜æ ¡/ç§‘ç ”æœºæ„ Logo ${i + 1}` })),
  { name: '13', alt: 'é«˜æ ¡/ç§‘ç ”æœºæ„ Logo 12' }
]

const placeholder = `data:image/svg+xml;utf8,
<svg xmlns='http://www.w3.org/2000/svg' width='320' height='120' viewBox='0 0 320 120'>
  <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%23ffffff'/><stop offset='100%' stop-color='%23f5faff'/></linearGradient></defs>
  <rect x='0.5' y='0.5' width='319' height='119' rx='14' fill='url(%23g)' stroke='%23c9d9eb'/>
  <text x='50%' y='52%' fill='%236682a3' font-size='18' font-weight='700' text-anchor='middle' dominant-baseline='middle'>LOGO</text>
  <text x='50%' y='72%' fill='%238ea4bf' font-size='11' text-anchor='middle' dominant-baseline='middle'>æœªæä¾›å›¾ç‰‡æ—¶å ä½</text>
</svg>`

function onImgError(e: Event){
  const el = e.target as HTMLImageElement
  if(!el) return
  const src = el.getAttribute('src') || ''
  const removeCard = ()=>{
    const card = (el.closest?.('.logo-card') as HTMLElement|null)
    if(card) card.remove()
  }
  // é«˜æ ¡/ç§‘ç ”æœºæ„ï¼ˆ/logos/ï¼‰ä¸å†æ˜¾ç¤ºå ä½ï¼špng -> jpgï¼Œä»å¤±è´¥åˆ™ç§»é™¤å¡ç‰‡
  if(src.includes('/logos/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ removeCard(); return }
    removeCard(); return
  }
  // æŠ•èµ„ logosï¼šä¼˜å…ˆ invest-logs -> jpg -> invest-logos -> jpg -> å ä½
  if(src.includes('/invest-logs/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ el.src = src.replace('/invest-logs/','/invest-logos/').replace(/\.jpe?g$/i,'.png'); return }
  }
  if(src.includes('/invest-logos/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ el.src = placeholder; return }
  }
  // é€šç”¨ png -> jpg å†å ä½
  if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
  if(/\.jpe?g$/i.test(src)){ el.src = placeholder; return }
  el.src = placeholder
}
</script>

<style scoped>
.ic-page{position:relative}
/* Hero */
.ic-hero{position:relative;overflow:hidden}
.hero-bg{position:absolute;inset:0;background:
  radial-gradient(900px 520px at 50% 10%,rgba(56,140,225,.30),rgba(56,140,225,0) 70%),
  linear-gradient(180deg,rgba(224,236,248,.85) 0%,rgba(214,230,244,.70) 55%,rgba(206,226,242,.55) 100%)}
.hero-inner{position:relative;display:grid;grid-template-columns:1fr;gap:18px;align-items:start;padding:70px 0}
.hero-title{margin:0 0 10px;font-size:clamp(30px,5vw,48px);font-weight:800;letter-spacing:.4px;color:#0a2647}
.hero-title .en{display:inline-block;margin-left:8px;font-size:16px;color:#2a64a2;letter-spacing:.6px}
.hero-sub{margin:0 0 14px;max-width:820px;color:#1a4169;opacity:.95;line-height:1.7}
.rotator{min-height:28px}
.rotator-text{display:inline-block;padding:6px 10px;border-radius:999px;background:#e9f2ff;border:1px solid #c7defb;color:#1a4b8f;font-weight:700;animation:fade .6s ease}
@keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
/* å»é™¤å³ä¾§å¯è§†åŒ–ï¼Œç»Ÿä¸€ä¸ºå•åˆ—ï¼Œä¸å…¶ä»–é¡µä¸€è‡´ */
@media (min-width:1024px){.hero-inner{grid-template-columns:1fr 360px}}
@media (max-width:960px){.hero-inner{padding:54px 0}}

/* åˆä½œä½“ç³» */
.ic-collab{padding:34px 0 90px}
.ic-module{margin-bottom:36px}
.ic-head{display:flex;gap:12px;align-items:flex-start;margin:0 0 12px}
.ic-head .emoji{font-size:22px;line-height:1}
.ic-head h2{margin:0 0 6px;font-size:22px;font-weight:800;color:#0a2a4a}
.ic-head p{margin:0;color:#114066}
.cards.g3{display:grid;gap:18px;grid-template-columns:repeat(3,minmax(0,1fr))}
.c-card{position:relative;padding:16px;border:1px solid rgba(90,140,175,.65);border-radius:16px;background:linear-gradient(170deg,rgba(255,255,255,.96),rgba(242,247,252,.92));box-shadow:0 10px 24px -14px rgba(18,54,95,.22)}
.c-card h3{margin:0 0 6px;color:#0a2a4a}
.c-card p{margin:0;color:#114066;font-size:13.5px}
/* ç§»é™¤å ä½ Logo æ¡†æ ·å¼ï¼Œå¡ç‰‡ä¿æŒç®€æ´ */
@media (max-width:1100px){.cards.g3{grid-template-columns:1fr 1fr}}
@media (max-width:640px){.cards.g3{grid-template-columns:1fr}}

/* Logo å¢™ï¼ˆæ”¿åºœ/æŠ•èµ„/é«˜æ ¡ï¼‰ */
.logo-wall{margin-top:16px;display:grid;gap:14px}
.logo-card{position:relative;display:flex;align-items:center;justify-content:center;padding:8px;border:1px solid rgba(140,170,200,.40);border-radius:12px;background:linear-gradient(170deg,rgba(255,255,255,.96),rgba(242,247,252,.92));box-shadow:0 6px 16px -12px rgba(18,54,95,.18)}
.logo-card img{width:100%;height:100%;max-width:180px;max-height:72px;object-fit:contain}
.logo-wall.gov{grid-template-columns:repeat(5,minmax(0,1fr))}
.logo-wall.invest{grid-template-columns:repeat(5,minmax(0,1fr))}
.logo-wall.uni{grid-template-columns:repeat(5,minmax(0,1fr))}
@media (max-width:1200px){
  .logo-wall.gov{grid-template-columns:repeat(4,minmax(0,1fr))}
  .logo-wall.invest{grid-template-columns:repeat(5,minmax(0,1fr))}
  .logo-wall.uni{grid-template-columns:repeat(5,minmax(0,1fr))}
}
@media (max-width:900px){
  .logo-wall.gov,.logo-wall.invest,.logo-wall.uni{grid-template-columns:repeat(3,minmax(0,1fr))}
}
@media (max-width:600px){
  .logo-wall.gov,.logo-wall.invest,.logo-wall.uni{grid-template-columns:repeat(2,minmax(0,1fr))}
}
</style>
