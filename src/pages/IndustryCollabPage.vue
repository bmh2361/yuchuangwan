<template>
  <div class="ic-page">
    <!-- â‘  Heroï¼šæ€»ä½“ä»‹ç»åŒº -->
    <section class="ic-hero" v-reveal>
      <div class="hero-bg" aria-hidden="true"></div>
      <div class="container hero-inner">
        <div class="hero-left">
          <h1 class="hero-title">äº§ä¸šåˆä½œ <span class="en">Industrial Collaboration</span></h1>
          <p class="hero-sub">
            â€œè‚²åˆ›æ¹¾ï¼ˆVisionTech Bayï¼‰è‡´åŠ›äºæ„å»ºâ€˜ç§‘æŠ€â€”äº§ä¸šâ€”èµ„æœ¬â€”æ”¿ç­–â€™ååŒç”Ÿæ€ï¼Œ
            é€šè¿‡ä¸æ”¿åºœã€æŠ•èµ„æœºæ„ã€å›½å†…å¤–é«˜æ ¡åŠç§‘ç ”å•ä½çš„é•¿æœŸåˆä½œï¼Œ
            æ¨åŠ¨ç§‘ç ”æˆæœè½¬åŒ–ã€äº§ä¸šå‡çº§ä¸å…¨çƒåˆ›æ–°ç½‘ç»œå»ºè®¾ã€‚â€
          </p>
          <div class="rotator" :key="activePhrase">
            <span class="rotator-text">{{ activePhrase }}</span>
          </div>
        </div>
        <aside class="hero-right">
          <div class="cta-card" v-tilt>
            <div class="cta-head">
              <div class="cta-emoji" aria-hidden="true">ğŸ¤</div>
              <div>
                <h3>è”ç³»æˆ‘ä»¬ Â· åŠ å…¥è‚²åˆ›æ¹¾</h3>
                <p>å¯¹æ¥åˆä½œ/å…¥é©»ï¼Œè·å–é«˜æ ¡ä¸äº§ä¸šèµ„æºæ’®åˆæœåŠ¡ã€‚</p>
              </div>
            </div>
            <div class="cta-actions">
              <RouterLink class="btn primary" :to="{ name: 'contact' }" aria-label="è”ç³»è‚²åˆ›æ¹¾">è”ç³»æˆ‘ä»¬</RouterLink>
              <RouterLink class="btn ghost" :to="{ name: 'contact', query: { type: 'join' } }" aria-label="åŠ å…¥è‚²åˆ›æ¹¾">åŠ å…¥è‚²åˆ›æ¹¾</RouterLink>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- â‘¡ åˆä½œä½“ç³»åŒº -->
    <section class="ic-collab container" v-reveal>
      <!-- æ¨¡å— 1ï¼šæ”¿åºœåˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ›</div>
          <div>
            <h2>ä¸­å›½åœ°æ–¹æ”¿åºœåˆä½œ</h2>
            <p>è‚²åˆ›æ¹¾ä¸å¤šåœ°æ”¿åºœåŠå›­åŒºå…±å»ºç§‘æŠ€åˆ›æ–°å¹³å°ï¼Œé€šè¿‡â€œäº§ä¸šé“¾æ‹›å•† + å¹³å°åŒ–è¿è¥ + æ•°æ®é©±åŠ¨ç®¡ç†â€ï¼Œæ‰“é€ å¯æŒç»­çš„åŒºåŸŸæˆæœè½¬åŒ–ç”Ÿæ€ã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>æ”¿åºœå›­åŒºå…±å»ºæ¨¡å¼</h3>
            <p>ä»¥é«˜æ ¡ç§‘ç ”æˆæœä¸ºæ ¸å¿ƒèµ„æºï¼Œå»ºè®¾åŒºåŸŸè½¬åŒ–ä¸­å¿ƒå’Œç¤ºèŒƒå®éªŒå®¤ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>ç§‘æŠ€æ‹›å•†ä¸åˆ›æ–°é›†ç¾¤</h3>
            <p>ååŠ©åœ°æ–¹æ”¿åºœåˆ¶å®šäº§ä¸šå¼•è¿›è§„åˆ’ï¼Œå¸å¼•ç§‘æŠ€å‹ä¼ä¸šè½åœ°ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æ”¿ç­–è¯„ä¼°ä¸æ•°æ®é—­ç¯</h3>
            <p>æ„å»ºé•¿æœŸç»©æ•ˆè¿½è¸ªä½“ç³»ï¼Œåé¦ˆæ•°æ®åŠ©åŠ›æ”¿ç­–ä¼˜åŒ–ã€‚</p>
          </article>
        </div>
        <!-- æ”¿åºœåˆä½œ logo å¢™ -->
        <div class="logo-wall gov">
          <div class="logo-card" v-for="l in govLogos" :key="'gov-'+l.name">
            <img :src="`/gov-logos/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>

      <!-- æ¨¡å— 2ï¼šæŠ•èµ„åˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ’°</div>
          <div>
            <h2>ä¸­å›½æŠ•èµ„ä¸èµ„æœ¬åˆä½œ</h2>
            <p>è‚²åˆ›æ¹¾è”åˆäº§ä¸šåŸºé‡‘ã€æ”¿åºœä¸“é¡¹åŠç¤¾ä¼šèµ„æœ¬ï¼Œå…±åŒæ¨åŠ¨ç¡¬ç§‘æŠ€é¡¹ç›®çš„æˆæœè½¬åŒ–å’Œè§„æ¨¡åŒ–å‘å±•ï¼Œå½¢æˆâ€œæœåŠ¡ + æŠ•èµ„â€åŒè½®é©±åŠ¨æ¨¡å¼ã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>è”åˆæŠ•èµ„å¹³å°</h3>
            <p>æ­å»ºæ”¿åºœåŸºé‡‘ä¸ä¼ä¸šèµ„æœ¬ååŒæœºåˆ¶ï¼Œæ”¯æŒç§‘ç ”æˆæœ PoC ä¸å­µåŒ–ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æˆæœè½¬åŒ–ä¸“é¡¹åŸºé‡‘</h3>
            <p>ä»¥ç¡¬ç§‘æŠ€é¡¹ç›®ä¸ºæ ¸å¿ƒæ ‡çš„ï¼Œæä¾›æ—©æœŸé˜¶æ®µè‚¡æƒæˆ– PoC èµ„é‡‘æ”¯æŒã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æŠ•åèµ‹èƒ½ä½“ç³»</h3>
            <p>æä¾›äº§ä¸šå¯¹æ¥ã€æŠ€æœ¯é¡¾é—®ä¸æ”¿ç­–èµ„æºï¼Œå½¢æˆé—­ç¯å­µåŒ–ç½‘ç»œã€‚</p>
          </article>
        </div>
        <!-- æŠ•èµ„åˆä½œ logo å¢™ -->
        <div class="logo-wall invest">
          <div class="logo-card" v-for="l in investLogos" :key="'invest-'+l.name">
            <!-- é¦–é€‰ invest-logsï¼Œå¤±è´¥æ—¶ onImgError è‡ªåŠ¨å°è¯• jpgï¼Œå†å°è¯• invest-logosï¼Œç„¶åå ä½ -->
            <img :src="`/invest-logs/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>

      <!-- æ¨¡å— 3ï¼ˆåˆå¹¶ï¼‰ï¼šé«˜æ ¡ä¸ç§‘ç ”æœºæ„åˆä½œ -->
      <div class="ic-module">
        <header class="ic-head">
          <div class="emoji" aria-hidden="true">ğŸ“</div>
          <div>
            <h2>é«˜æ ¡ä¸ç§‘ç ”æœºæ„åˆä½œ</h2>
            <p>è‚²åˆ›æ¹¾æœåŠ¡å¤šæ‰€ä¸­å›½â€œåŒä¸€æµâ€é«˜æ ¡å¹¶æ‹“å±•å›½é™…åˆä½œç½‘ç»œï¼Œæä¾›ä»ä¸“åˆ©ç¡®æƒã€æµç¨‹ä¼˜åŒ–åˆ°äº§ä¸šåŒ–è½åœ°çš„å…¨é“¾æ¡æœåŠ¡ï¼Œè”åˆå…±å»ºå®éªŒå®¤ä¸æ ‡å‡†å…±ç ”å¹³å°ã€‚</p>
          </div>
        </header>
        <div class="cards g3">
          <article class="c-card" v-tilt>
            <h3>ç§‘ç ”æˆæœè½¬åŒ–ä¸­å¿ƒ</h3>
            <p>æä¾›æ ¡å†…æµç¨‹ä»£åŠã€IP è§„åˆ’ä¸å•†ä¸šæ–¹æ¡ˆè®¾è®¡ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æ ¡ä¼è”åˆç ”å‘</h3>
            <p>ä»¥äº§ä¸šéœ€æ±‚ä¸ºå¯¼å‘ï¼Œå…±å»ºå®éªŒå®¤ä¸åº”ç”¨ç ”ç©¶é¡¹ç›®ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>æˆæœè½åœ°ä¸äº§ä¸šå­µåŒ–</h3>
            <p>å¯¹æ¥æ”¿åºœå›­åŒºä¸ä¸­è¯•å¹³å°ï¼ŒåŠ é€Ÿç§‘ç ”æˆæœå•†ä¸šåŒ–ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>ä¸­è‹±è”åˆå®éªŒå®¤</h3>
            <p>æ­å»ºç§‘ç ”ä¸äº§ä¸šååŒç©ºé—´ï¼Œæ¨åŠ¨è·¨å›½æŠ€æœ¯éªŒè¯ä¸æµ‹è¯•ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>å›½é™…æˆæœè½¬åŒ–é€šé“</h3>
            <p>æ”¯æŒæµ·å¤–æŠ€æœ¯åœ¨ä¸­å›½å›­åŒºä¸­è¯•ã€è½åœ°ä¸æœ¬åœ°åŒ–ç”Ÿäº§ã€‚</p>
          </article>
          <article class="c-card" v-tilt>
            <h3>å­¦æœ¯é¡¾é—®ä¸æ ‡å‡†å…±å»º</h3>
            <p>ä¸æ¬§æ´²ç§‘å­¦é™¢åŠè‹±å›½ç§‘ç ”æœºæ„åˆä½œï¼Œå‚ä¸å›½é™…æ ‡å‡†åˆ¶å®šä¸æˆæœè¯„ä¼°ã€‚</p>
          </article>
        </div>
        <!-- é«˜æ ¡ä¸ç§‘ç ”æœºæ„ logo å¢™ -->
        <div class="logo-wall uni">
          <div class="logo-card" v-for="l in uniLogos" :key="'uni-'+l.name">
            <img :src="`/logos/${l.name}.png`" :alt="l.alt" @error="onImgError" />
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from 'vue'

const phrases = ['æŠ€æœ¯è½¬ç§»','å›½é™…åˆä½œ','äº§ä¸šå…±åˆ›','æ”¿ç­–èµ‹èƒ½']
const idx = ref(0)
const activePhrase = ref(phrases[0])
let timer: number | undefined

onMounted(()=>{
  timer = window.setInterval(()=>{
    idx.value = (idx.value + 1) % phrases.length
    activePhrase.value = phrases[idx.value]
  }, 2600)
})
onBeforeUnmount(()=>{ if(timer) window.clearInterval(timer) })

// Logo å¢™æ•°æ®ï¼ˆæ•°å­—åºå·ï¼‰
const govLogos = Array.from({ length: 10 }, (_, i) => ({ name: String(i+1), alt: `æ”¿åºœåˆä½œ Logo ${i+1}` }))
const investLogos = Array.from({ length: 16 }, (_, i) => ({ name: String(i+1), alt: `æŠ•èµ„åˆä½œ Logo ${i+1}` }))
const uniLogos = Array.from({ length: 12 }, (_, i) => ({ name: String(i+1), alt: `é«˜æ ¡/ç§‘ç ”æœºæ„ Logo ${i+1}` }))

const placeholder = `data:image/svg+xml;utf8,
<svg xmlns='http://www.w3.org/2000/svg' width='320' height='120' viewBox='0 0 320 120'>
  <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%23ffffff'/><stop offset='100%' stop-color='%23f5faff'/></linearGradient></defs>
  <rect x='0.5' y='0.5' width='319' height='119' rx='14' fill='url(%23g)' stroke='%23c9d9eb'/>
  <text x='50%' y='52%' fill='%236682a3' font-size='18' font-weight='700' text-anchor='middle' dominant-baseline='middle'>LOGO</text>
  <text x='50%' y='72%' fill='%238ea4bf' font-size='11' text-anchor='middle' dominant-baseline='middle'>æœªæä¾›å›¾ç‰‡æ—¶å ä½</text>
</svg>`

function onImgError(e: Event){
  const el = e.target as HTMLImageElement
  if(!el) return
  const src = el.getAttribute('src') || ''
  const removeCard = ()=>{
    const card = (el.closest?.('.logo-card') as HTMLElement|null)
    if(card) card.remove()
  }
  // é«˜æ ¡/ç§‘ç ”æœºæ„ï¼ˆ/logos/ï¼‰ä¸å†æ˜¾ç¤ºå ä½ï¼špng -> jpgï¼Œä»å¤±è´¥åˆ™ç§»é™¤å¡ç‰‡
  if(src.includes('/logos/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ removeCard(); return }
    removeCard(); return
  }
  // æŠ•èµ„ logosï¼šä¼˜å…ˆ invest-logs -> jpg -> invest-logos -> jpg -> å ä½
  if(src.includes('/invest-logs/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ el.src = src.replace('/invest-logs/','/invest-logos/').replace(/\.jpe?g$/i,'.png'); return }
  }
  if(src.includes('/invest-logos/')){
    if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
    if(/\.jpe?g$/i.test(src)){ el.src = placeholder; return }
  }
  // é€šç”¨ png -> jpg å†å ä½
  if(/\.png$/i.test(src)){ el.src = src.replace(/\.png$/i, '.jpg'); return }
  if(/\.jpe?g$/i.test(src)){ el.src = placeholder; return }
  el.src = placeholder
}
</script>

<style scoped>
.ic-page{position:relative}
/* Hero */
.ic-hero{position:relative;overflow:hidden}
.hero-bg{position:absolute;inset:0;background:
  radial-gradient(900px 360px at 20% -10%, rgba(140,190,255,.35), rgba(140,190,255,0) 70%),
  linear-gradient(180deg,#f2f7fc 0%,#eef5fb 100%)}
.hero-inner{position:relative;display:grid;grid-template-columns:1fr;gap:18px;align-items:start;padding:70px 0}
.hero-title{margin:0 0 10px;font-size:clamp(30px,5vw,48px);font-weight:800;letter-spacing:.4px;color:#0a2647}
.hero-title .en{display:inline-block;margin-left:8px;font-size:16px;color:#2a64a2;letter-spacing:.6px}
.hero-sub{margin:0 0 14px;max-width:820px;color:#1a4169;opacity:.95;line-height:1.7}
.rotator{min-height:28px}
.rotator-text{display:inline-block;padding:6px 10px;border-radius:999px;background:#e9f2ff;border:1px solid #c7defb;color:#1a4b8f;font-weight:700;animation:fade .6s ease}
@keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
/* å»é™¤å³ä¾§å¯è§†åŒ–ï¼Œç»Ÿä¸€ä¸ºå•åˆ—ï¼Œä¸å…¶ä»–é¡µä¸€è‡´ */
@media (min-width:1024px){.hero-inner{grid-template-columns:1fr 360px}}
@media (max-width:960px){.hero-inner{padding:54px 0}}

/* åˆä½œä½“ç³» */
.ic-collab{padding:34px 0 90px}
.ic-module{margin-bottom:36px}
.ic-head{display:flex;gap:12px;align-items:flex-start;margin:0 0 12px}
.ic-head .emoji{font-size:22px;line-height:1}
.ic-head h2{margin:0 0 6px;font-size:22px;font-weight:800;color:#0a2a4a}
.ic-head p{margin:0;color:#114066}
.cards.g3{display:grid;gap:18px;grid-template-columns:repeat(3,minmax(0,1fr))}
.c-card{position:relative;padding:16px;border:1px solid rgba(90,140,175,.65);border-radius:16px;background:linear-gradient(170deg,rgba(255,255,255,.96),rgba(242,247,252,.92));box-shadow:0 10px 24px -14px rgba(18,54,95,.22)}
.c-card h3{margin:0 0 6px;color:#0a2a4a}
.c-card p{margin:0;color:#114066;font-size:13.5px}
/* ç§»é™¤å ä½ Logo æ¡†æ ·å¼ï¼Œå¡ç‰‡ä¿æŒç®€æ´ */
@media (max-width:1100px){.cards.g3{grid-template-columns:1fr 1fr}}
@media (max-width:640px){.cards.g3{grid-template-columns:1fr}}

/* Logo å¢™ï¼ˆæ”¿åºœ/æŠ•èµ„/é«˜æ ¡ï¼‰ */
.logo-wall{margin-top:16px;display:grid;gap:14px}
.logo-card{position:relative;display:flex;align-items:center;justify-content:center;padding:8px;border:1px solid rgba(140,170,200,.40);border-radius:12px;background:linear-gradient(170deg,rgba(255,255,255,.96),rgba(242,247,252,.92));box-shadow:0 6px 16px -12px rgba(18,54,95,.18)}
.logo-card img{width:100%;height:100%;max-width:180px;max-height:72px;object-fit:contain}
.logo-wall.gov{grid-template-columns:repeat(5,minmax(0,1fr))}
.logo-wall.invest{grid-template-columns:repeat(5,minmax(0,1fr))}
.logo-wall.uni{grid-template-columns:repeat(5,minmax(0,1fr))}
@media (max-width:1200px){
  .logo-wall.gov{grid-template-columns:repeat(4,minmax(0,1fr))}
  .logo-wall.invest{grid-template-columns:repeat(5,minmax(0,1fr))}
  .logo-wall.uni{grid-template-columns:repeat(5,minmax(0,1fr))}
}
@media (max-width:900px){
  .logo-wall.gov,.logo-wall.invest,.logo-wall.uni{grid-template-columns:repeat(3,minmax(0,1fr))}
}
@media (max-width:600px){
  .logo-wall.gov,.logo-wall.invest,.logo-wall.uni{grid-template-columns:repeat(2,minmax(0,1fr))}
}
</style>
